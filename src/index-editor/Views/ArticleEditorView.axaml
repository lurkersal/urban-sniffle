<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:views="clr-namespace:IndexEditor.Views"
             x:Class="IndexEditor.Views.ArticleEditorView">
    <Grid>
        <StackPanel Margin="16">
            <!-- Debug: Show type of first item in Articles -->
            <TextBlock Text="{Binding Articles[0].GetType().FullName}" Foreground="Red" FontSize="12"/>
        <!-- Single Article Card for Editing -->
        <Border Background="#EEE" CornerRadius="4" Padding="16" Margin="0,0,0,16">
            <Grid RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto" ColumnDefinitions="Auto,*" >
                <TextBlock Grid.Row="0" Grid.Column="0" Text="Category:" VerticalAlignment="Center" FontWeight="Bold"/>
                <ComboBox Grid.Row="0" Grid.Column="1" SelectedItem="{Binding SelectedArticle.Category, Mode=TwoWay}" Width="140"/>

                <TextBlock Grid.Row="1" Grid.Column="0" Text="Title:" VerticalAlignment="Center" FontWeight="Bold"/>
                <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding SelectedArticle.Title, Mode=TwoWay}" Width="240"/>

                <TextBlock Grid.Row="2" Grid.Column="0" Text="Pages:" VerticalAlignment="Center" FontWeight="Bold"/>
                <TextBox Grid.Row="2" Grid.Column="1" Text="{Binding SelectedArticle.Pages, Converter={StaticResource ArticleFieldFriendlyTextConverter}, Mode=TwoWay}" Width="240"/>

                <TextBlock Grid.Row="3" Grid.Column="0" Text="Model Names:" VerticalAlignment="Center" FontWeight="Bold"/>
                <TextBox Grid.Row="3" Grid.Column="1" Text="{Binding SelectedArticle.ModelNames[0], Mode=TwoWay}" Width="240"/>

                <TextBlock Grid.Row="4" Grid.Column="0" Text="Ages:" VerticalAlignment="Center" FontWeight="Bold"/>
                <TextBox Grid.Row="4" Grid.Column="1" Text="{Binding SelectedArticle.Ages[0], Mode=TwoWay}" Width="240"/>

                <TextBlock Grid.Row="5" Grid.Column="0" Text="Photographers:" VerticalAlignment="Center" FontWeight="Bold"/>
                <TextBox Grid.Row="5" Grid.Column="1" Text="{Binding SelectedArticle.Photographers[0], Mode=TwoWay}" Width="240"/>

                <TextBlock Grid.Row="6" Grid.Column="0" Text="Measurements:" VerticalAlignment="Center" FontWeight="Bold"/>
                <TextBox Grid.Row="6" Grid.Column="1" Text="{Binding SelectedArticle.Measurements[0], Mode=TwoWay}" Width="240"/>
            </Grid>
        </Border>
        <!-- Section 1: Identity -->
        <TextBlock Text="Section 1: Identity" FontWeight="Bold" FontSize="14" Margin="0,0,0,8"/>
        <StackPanel Orientation="Horizontal" Spacing="8">
            <TextBlock Text="Category" VerticalAlignment="Center"/>
            <ComboBox Name="CategoryComboBox" Width="140" SelectedIndex="0"/>
        </StackPanel>
        <StackPanel Orientation="Horizontal" Spacing="8" Margin="0,8,0,0">
            <TextBlock Text="Title" VerticalAlignment="Center"/>
            <TextBox Name="TitleTextBox" Width="240" Text="Letters to the Editor"/>
        </StackPanel>
        <!-- Section 2: Page Segments -->
        <TextBlock Text="Page Segments" FontWeight="Bold" FontSize="14" Margin="0,16,0,8"/>
        <Border Background="#F5F5F5" CornerRadius="4" Padding="8">
            <StackPanel>
                <!-- Example segment rows -->
                <StackPanel Orientation="Horizontal" Spacing="12" Margin="0,2">
                    <TextBlock Text="2 â€“ 3" Width="60"/>
                    <Button Name="EditSegmentBtn" Content="âœŽ" Width="28" Height="28"/>
                    <Button Content="ðŸ—‘" Width="28" Height="28"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" Spacing="12" Margin="0,2">
                    <TextBlock Text="8 â€“ 9" Width="60"/>
                    <Button Content="âœŽ" Width="28" Height="28"/>
                    <Button Content="ðŸ—‘" Width="28" Height="28"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" Spacing="12" Margin="0,2">
                    <TextBlock Text="14 â€“ 15" Width="60"/>
                    <Button Content="âœŽ" Width="28" Height="28"/>
                    <Button Content="ðŸ—‘" Width="28" Height="28"/>
                </StackPanel>
            </StackPanel>
        </Border>
        <Button Name="AddSegmentBtn" Content="+ Add segment at current page" Margin="0,8,0,0"/>
        <!-- Section 3: Notes -->
        <TextBlock Text="Notes" FontWeight="Bold" FontSize="14" Margin="0,16,0,8"/>
        <TextBox AcceptsReturn="True" Height="60"/>

        <!-- Section 4: Conditional Metadata (placeholder) -->
        <TextBlock Text="Conditional Metadata (appears based on category)" FontStyle="Italic" FontSize="12" Margin="0,16,0,0"/>
        </StackPanel>
        <!-- Overlay for SegmentEditorPopover -->
        <!-- <Border Name="SegmentEditorOverlay" Background="#80000000" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" ZIndex="100" IsVisible="False">
            <views:SegmentEditorPopover HorizontalAlignment="Center" VerticalAlignment="Center"/>
        </Border> -->
    </Grid>
</UserControl>
