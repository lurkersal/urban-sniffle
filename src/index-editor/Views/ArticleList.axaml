<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:IndexEditor.Views"
             x:Class="IndexEditor.Views.ArticleList">
    <UserControl.Resources>
        <local:CoverModelCategoryConverter x:Key="CoverModelCategoryConverter" />
        <local:ArticleCategoryDisplayConverter x:Key="ArticleCategoryDisplayConverter" />
        <local:ArticleCategoryToColorConverter x:Key="ArticleCategoryToColorConverter" />
        <local:ArticleFieldFriendlyTextConverter x:Key="ArticleFieldFriendlyTextConverter" />
        <local:SelectedArticleBorderConverter x:Key="SelectedArticleBorderConverter" />
    </UserControl.Resources>
    <Grid RowDefinitions="Auto,*">
        <TextBlock Grid.Row="0" Text="Article List" FontWeight="Bold" FontSize="16" Margin="8,8,8,4"/>
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Margin="0">
            <ItemsControl ItemsSource="{Binding Articles}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border
                            Background="{Binding Category, Converter={StaticResource ArticleCategoryToColorConverter}}"
                            Margin="8,4" Padding="8" CornerRadius="4"
                            BorderBrush="{Binding IsSelected, Converter={StaticResource SelectedArticleBorderConverter}}"
                            BorderThickness="2"
                            PointerPressed="OnArticlePointerPressed"
                            Tag="{Binding}" >
                            <Grid RowDefinitions="Auto,Auto,Auto" ColumnDefinitions="*,Auto">
                                <!-- Top row: Title (left, bold, large), Category (right, no label) -->
                                <TextBlock Grid.Row="0" Grid.Column="0" Text="{Binding DisplayTitle}" FontWeight="Bold" FontSize="18" VerticalAlignment="Top"/>
                                <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding Category}" FontWeight="Bold" FontSize="14" HorizontalAlignment="Right" VerticalAlignment="Top"/>

                                <!-- Second row: Model info for Model/Cover only -->
                                <StackPanel Grid.Row="1" Grid.ColumnSpan="2" Orientation="Horizontal" IsVisible="{Binding Category, Converter={StaticResource CoverModelCategoryConverter}}">
                                    <TextBlock Text="{Binding ModelNames[0]}" FontSize="14" Margin="0,0,12,0"/>
                                    <TextBlock Text="{Binding Ages[0]}" FontSize="14" Margin="0,0,12,0"/>
                                    <TextBlock Text="{Binding Measurements[0]}" FontSize="14"/>
                                </StackPanel>

                                <!-- Third row: Photographer (left) and Pages (right, always visible) -->
                                <Grid Grid.Row="2" Grid.ColumnSpan="2">
                                    <TextBlock Text="{Binding Photographers[0]}" FontSize="13" FontWeight="Normal" HorizontalAlignment="Left" VerticalAlignment="Bottom"/>
                                    <TextBlock Text="{Binding Pages, Converter={StaticResource ArticleFieldFriendlyTextConverter}}" FontSize="13" FontWeight="Normal" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                </Grid>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
    </Grid>
</UserControl>
